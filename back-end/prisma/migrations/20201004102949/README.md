# Migration `20201004102949`

This migration has been generated by Surakarn Samkaew at 10/4/2020, 5:29:49 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Role" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL
)

CREATE TABLE "_RoleToUser" (
    "A" INTEGER NOT NULL,
    "B" INTEGER NOT NULL,

    FOREIGN KEY ("A") REFERENCES "Role"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("B") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE UNIQUE INDEX "_RoleToUser_AB_unique" ON "_RoleToUser"("A", "B")

CREATE INDEX "_RoleToUser_B_index" ON "_RoleToUser"("B")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201004094709..20201004102949
--- datamodel.dml
+++ datamodel.dml
@@ -1,19 +1,29 @@
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
 }
 model Role {
-  name String @unique
+  id Int @id @default(autoincrement())
+  name String
+  users User[]
 }
 model User {
   id Int @id @default(autoincrement())
   email String @unique
   password String
   roles Role[]
 }
+
+// model RoleUser {
+//   roleId Int
+//   role Role @relation(fields: [roleId], references: [id])
+//   userId Int
+//   user User @relation(fields: [userId], references: [id])
+//   @@id([roleId, userId])
+// }
```


